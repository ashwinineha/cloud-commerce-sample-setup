#
# [y] SAP Commerce Platform
#
#  Copyright (c) 2000-2020 SAP SE. All rights reserved.
#
#  This software is the confidential and proprietary information of SAP
#  Customer Experience ("Confidential Information"). You shall not disclose such
#  Confidential Information and shall use it only in accordance with the
#  terms of the license agreement you entered into with SAP Customer Experience.
#

# rediscart.key=value

# Specifies the location of the spring context file putted automatically to the global platform application context.
rediscart.application-context=rediscart-spring.xml

polyglot.repository.config.rediscart.beanName=documentCartRepository
polyglot.repository.config.rediscart.typeCodes=Cart,CartEntry, \
  AbstractOrderEntryProductInfo[orderEntry], \
  PromotionResult[order], \
  AbstractPromotionAction[promotionResult], \
  PromotionOrderEntryConsumed[promotionResult]

## HSQLDB settings
rediscart.storage.jdbc.url=jdbc:hsqldb:file:${HYBRIS_DATA_DIR}/hsqldb/documentcart;shutdown=true;hsqldb.tx=MVCC;hsqldb.log_size=256
rediscart.storage.jdbc.driver=org.hsqldb.jdbcDriver
rediscart.storage.jdbc.user=hybris
rediscart.storage.jdbc.password=sirbyh
rediscart.storage.jdbc.pool.size=10

## MYSQL DB settings
#rediscart.storage.jdbc.url=jdbc:mysql://localhost:3306/hybris?useConfigs=maxPerformance&characterEncoding=utf8&useSSL=false
#rediscart.storage.jdbc.driver=com.mysql.jdbc.Driver
#rediscart.storage.jdbc.user=hybris
#rediscart.storage.jdbc.password=sirbyh
#rediscart.storage.jdbc.pool.name=default
#rediscart.storage.jdbc.pool.size=10
#rediscart.storage.jdbc.props.cachePrepStmts=true
#rediscart.storage.jdbc.props.prepStmtCacheSize=250
#rediscart.storage.jdbc.props.prepStmtCacheSqlLimit=2048

## Redis Connection Settings
rediscart.storage.redis.host=localhost
rediscart.storage.redis.port=6379
rediscart.storage.redis.password=rediscart
rediscart.storage.redis.use.ssl=false
rediscart.storage.redis.client.name=rediscart

## Redis Connection Pool Settings
rediscart.storage.redis.use.pool=true
rediscart.storage.redis.pool.minIdle=0
rediscart.storage.redis.pool.maxIdle=8
rediscart.storage.redis.pool.maxTotal=8

# Connection Retry configurations
rediscart.storage.redis.retry.max.attempts=5
rediscart.storage.redis.retry.backoff.period.initialInterval=2000
rediscart.storage.redis.retry.backoff.period.maxInterval=10000
rediscart.storage.redis.retry.backoff.period.multiplier=1.5

# Connection Timeout configurations
rediscart.storage.redis.client.connectionTimeout=2000
rediscart.storage.redis.client.readTimeout=2000

# Embedded Redis Server Settings - ONLY FOR LOCAL SETUP
redis.embedded.server.enabled = true
redis.embedded.server.port = 6379
redis.embedded.server.password = rediscart


# property for DatabaseCartStorage storage implementation. Enables throwing exception when query requires getting all table
# entities and scanning them in memory. This property should be used only for diagnosis of suboptimal queries
rediscart.storage.databaseCartStorage.throwExceptionOnFullScan=false

relation.RedisCartRef2CartMeta.markmodified=false
# For local build
rediscart.cluster.enabled=false
